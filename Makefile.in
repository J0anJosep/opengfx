
%.obg: $(GRF_FILES) $(DESC_FILENAME_SRC)
	$(_E) "[ASSEMBLING] $@"
	@echo "[metadata]" > $@
	@echo "name        = $(REPO_NAME)" >> $@
	@echo "shortname   = $(REPO_SHORTNAME)" >> $@
	@echo "version     = $(NEWGRF_VERSION)" >> $@
	@echo "palette     = $(REPO_PALETTE)" >> $@
	@echo "blitter     = $(REPO_BLITTER)" >> $@
	$(_V) $(SCRIPT_DIR)/translations.sh | sed 's/{TITLE}/$(REPO_TITLE)/' >> $@

	@echo "" >> $@
	@echo "[files]" >> $@
	$(_V) $(_V)for i in $(BASE_FILENAME); do echo "`echo $$i | cut -d_ -f2` = $$i.grf" >> $@; done

	@echo "" >> $@
	@echo "[md5s]" >> $@
	$(_V)for i in $(GRF_FILES); do printf "%-18s = %s\n" $$i `$(GRFID) $(GRFID_FLAGS) $$i` >> $@; done

	@echo "" >> $@
	@echo "[origin]" >> $@
	@echo "$(REPO_ORIGIN)" >> $@

test::
	$(_E) "Graphics source list:         $(GRAPHICS_SOURCE_LIST_FILES)"


%.tags.txt:
	$(_E) "[LANG] $@"
	$(_V) echo "TITLE    :OpenGFX" > $@

ogfxe_extra.tags.txt: $(REV_FILENAME)
	$(_E) "[LANG] $@"
	$(_V) echo "VERSION  :$(REPO_VERSION_STRING)" > $@
	$(_V) echo "TITLE    :$(REPO_TITLE)" >> $@
	$(_V) echo "FILENAME :$(TARGET_FILES)" >> $@

clean::
	$(_E) "[CLEAN] obg"
	$(_V) -rm opengfx.obg
	$(_V) -rm *.tags.txt

